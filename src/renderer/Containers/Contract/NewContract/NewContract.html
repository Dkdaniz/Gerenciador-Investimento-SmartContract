<loading show="vm.processing"></loading>

<div class="content">

    <page-title page="Novo contrato"></page-title>

    <div class="notification is-danger" ng-if="vm.error">
        <button class="delete" ng-click="vm.error = null"></button>
        <span ng-bind-html="vm.error"></span>
    </div>
    
    <div class="notification is-success" ng-if="vm.success">
        <button class="delete" ng-click="vm.success = null"></button>
        <span ng-bind-html="vm.success"></span>
    </div>
    
    <div class="form-content">
        <div class="columns">
            <div class="column">
                <label class="label">Nome Cliente</label>
                <div class="field">
                    <div class="control is-expanded">
                        <input class="input" type="text" ng-model="vm.contract.customer">
                    </div>
                </div>
            </div>
        </div>    
       
        <div class="columns">
            <div class="column">
                <label class="label">Valor do investimento</label>
                <div class="field">
                    <div class="control is-expanded">
                        <input class="input" type="text" placeholder="10.000,00" ui-number-mask ng-model="vm.contract.amount">
                    </div>
                </div>
            </div>
    
            <div class="column">
                <label class="label">CarÃªncia</label>
                <div class="field">
                    <div class="control is-expanded">
                        <input class="input" type="text" ng-model="vm.contract.lack">
                    </div>
                </div>
            </div>
        </div>
    
        <div class="columns">
            <div class="column">
                <label class="label">% Investimento</label>
                <div class="field has-addons">
                    <div class="control is-expanded">
                        <input class="input" type="text" placeholder="10" ui-number-mask ng-model="vm.contract.percentage">
                    </div>
                    <p class="control"><a class="button is-static">%</a></p>
                </div>
            </div>
    
            <div class="column">
                <label class="label">Hash PDF</label>
                <div class="field">
                    <div class="control is-expanded">
                        <input class="input" type="text" readonly="true" disabled ng-model="vm.contract.pdfHash">
                    </div>
                </div>
            </div>
        </div>
    
        <div class="columns">
            <div class="column">
                <label class="label">Password</label>
                <div class="field">
                    <div class="control is-expanded">
                        <input class="input" type="password" minlength="8" ng-model="vm.contract.password">
                    </div>
                </div>
            </div>
        </div>
    
        <div class="file has-name is-boxed">
            <label class="file-label">
                <input class="file-input" type="file" name="pdf" fileread="vm.contract.file" >
                <span class="file-cta">
                    <span class="file-icon">
                        <i class="fas fa-upload"></i>
                    </span>
                    <span class="file-label">
                        Envie um PDF ...
                    </span>
                </span>
                <span ng-if="vm.contract.file" class="file-name">{{ vm.contract.file.name }}</span>
            </label>
        </div>
    
    </div>
    
    <div class="field is-grouped-centered">
        <p class="control">
            <a class="button is-success is-medium is-rounded" ng-click="vm.create()" ng-class="{'is-loading': vm.processing}">
                <span class="icon">
                    <i class="fas fa-check"></i>
                </span>
                <span>Criar</span>
            </a>
        </p>
    </div>
</div>